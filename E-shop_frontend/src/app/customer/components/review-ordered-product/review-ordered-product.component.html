<form [formGroup]="reviewForm" class="review-form" (ngSubmit)="submitForm()">

  <!-- Upload d'image -->
  <div class="file-upload-container">
    <label class="file-upload-label">
      <span>Ajouter une photo</span>
      <input type="file" id="fileInput" (change)="onFileSelected($event)" hidden accept="image/*">
      <mat-icon>cloud_upload</mat-icon>
    </label>

    <div *ngIf="selectedFile" class="image-preview">
      <div class="circle-image">
        <img [src]="imagePreview" alt="Image sélectionnée" class="preview-image">
      </div>
    </div>
  </div>

  <!-- Notation par étoiles -->
  <div class="rating-section">
    <label class="rating-label">Notez le produit</label>
    <div class="star-rating">
      <mat-icon
        *ngFor="let star of stars; let i = index"
        [ngClass]="{ 'active': i < reviewForm.get('rating')?.value }"
        (click)="setRating(i + 1)">
        {{ i < reviewForm.get('rating')?.value ? 'star' : 'star_border' }}
      </mat-icon>
    </div>
    <mat-error *ngIf="reviewForm.get('rating')?.invalid && reviewForm.get('rating')?.touched">
      Veuillez sélectionner une note !
    </mat-error>
  </div>

  <!-- Description -->
  <mat-form-field appearance="outline" class="description-field">
    <mat-label>Votre avis</mat-label>
    <textarea matInput formControlName="description" 
              placeholder="Partagez votre expérience avec ce produit..." 
              rows="4"></textarea>
    <mat-error *ngIf="reviewForm.get('description')?.invalid && reviewForm.get('description')?.touched">
      Ce champ est obligatoire !
    </mat-error>
  </mat-form-field>

  <!-- Bouton de soumission -->
  <button mat-raised-button color="primary" type="submit" [disabled]="reviewForm.invalid" class="submit-btn">
    <mat-icon>send</mat-icon>
    Publier l'avis
  </button>
</form>