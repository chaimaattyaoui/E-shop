<div class="orders-container">
    <h2 class="page-title">Mes Commandes</h2>
    
    <div *ngIf="myOrders && myOrders.length > 0; else noOrders">
        <mat-table #basicTable [dataSource]="myOrders" class="orders-table">

            <ng-container matColumnDef="trackingId">
                <mat-header-cell *matHeaderCellDef>N° de Suivi</mat-header-cell>
                <mat-cell *matCellDef="let myOrder">
                    <div class="tracking-id">{{ myOrder.trackingId }}</div>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="amount">
                <mat-header-cell *matHeaderCellDef>Montant</mat-header-cell>
                <mat-cell *matCellDef="let myOrder">
                    <div class="amount">{{ myOrder.amount }} TND</div>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="description">
                <mat-header-cell *matHeaderCellDef>Description</mat-header-cell>
                <mat-cell *matCellDef="let myOrder">
                    <div class="description">{{ myOrder.orderDescription }}</div>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="address">
                <mat-header-cell *matHeaderCellDef>Adresse</mat-header-cell>
                <mat-cell *matCellDef="let myOrder">
                    <div class="address">{{ myOrder.address }}</div>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="date">
                <mat-header-cell *matHeaderCellDef>Date</mat-header-cell>
                <mat-cell *matCellDef="let myOrder">
                    <div class="date">{{ myOrder.date | date: 'dd/MM/yyyy' }}</div>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="status">
                <mat-header-cell *matHeaderCellDef>Statut</mat-header-cell>
                <mat-cell *matCellDef="let myOrder">
                    <div class="status">{{ myOrder.orderStatus }}</div>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="action">
                <mat-header-cell *matHeaderCellDef>Action</mat-header-cell>
                <mat-cell *matCellDef="let myOrder">
                    <div class="action-buttons">
                        <span *ngIf="myOrder.orderStatus == 'Delivered'">
                            <button mat-raised-button color="primary" 
                                    routerLink="/customer/ordered_products/{{myOrder.id}}"
                                    class="review-btn">
                                <mat-icon>rate_review</mat-icon>
                                Évaluer
                            </button>  
                        </span>
                    </div>
                </mat-cell>
            </ng-container>

            <mat-header-row *matHeaderRowDef="['trackingId','amount','description','address','date','status','action']"></mat-header-row>
            <mat-row *matRowDef="let row; columns: ['trackingId','amount','description','address','date','status','action']"></mat-row>

        </mat-table>
    </div>

    <ng-template #noOrders>
        <div class="no-orders">
            <mat-icon class="no-orders-icon">inventory_2</mat-icon>
            <h3>Aucune commande trouvée</h3>
            <p>Vous n'avez pas encore passé de commande</p>
            <button mat-raised-button color="primary" routerLink="/customer/dashboard" class="shop-btn">
                <mat-icon>shopping_basket</mat-icon>
                Découvrir nos produits
            </button>
        </div>
    </ng-template>
</div>