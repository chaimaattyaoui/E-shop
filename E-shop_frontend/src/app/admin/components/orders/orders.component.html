<div class="container">
    <mat-card class="orders-card">
        <mat-card-header class="card-header">
            <mat-card-title>
                <h2>Gestion des Commandes</h2>
            </mat-card-title>
        </mat-card-header>

        <mat-card-content>
            <table mat-table [dataSource]="orders" class="orders-table mat-elevation-z4">
               
               <!-- Tracking ID Column -->
               <ng-container matColumnDef="trackingId">
                 <th mat-header-cell *matHeaderCellDef class="table-header">Tracking ID</th>
                 <td mat-cell *matCellDef="let order" class="tracking-cell">
                    <span class="tracking-badge">{{ order.trackingId}}</span>
                 </td>
               </ng-container>

               <!-- User Name Column -->
               <ng-container matColumnDef="userName">
                 <th mat-header-cell *matHeaderCellDef class="table-header">Utilisateur</th>
                 <td mat-cell *matCellDef="let order" class="user-cell">
                    <div class="user-info">
                        <mat-icon class="user-icon">person</mat-icon>
                        {{ order.userName}}
                    </div>
                 </td>
               </ng-container>

              <!-- Amount Column -->
              <ng-container matColumnDef="amount">
                <th mat-header-cell *matHeaderCellDef class="table-header">Montant</th>
                 <td mat-cell *matCellDef="let order" class="amount-cell">
                    <span class="amount-badge">{{ order.amount }}</span>
                 </td>
               </ng-container>
               
               <!-- Description Column -->
               <ng-container matColumnDef="description">
                 <th mat-header-cell *matHeaderCellDef class="table-header">Description</th>
                 <td mat-cell *matCellDef="let order" class="description-cell">
                    {{ order.orderDescription}}
                 </td>
               </ng-container>

              <!-- Address Column -->
              <ng-container matColumnDef="address">
                 <th mat-header-cell *matHeaderCellDef class="table-header">Adresse</th>
                 <td mat-cell *matCellDef="let order" class="address-cell">
                    <mat-icon class="address-icon">location_on</mat-icon>
                    {{ order.address}}
                 </td>
               </ng-container>

              <!-- Date Column -->
              <ng-container matColumnDef="date">
                 <th mat-header-cell *matHeaderCellDef class="table-header">Date</th>
                 <td mat-cell *matCellDef="let order" class="date-cell">
                    <div class="date-wrapper">
                        <mat-icon class="date-icon">event</mat-icon>
                        {{ order.date | date:'dd/MM/yyyy' }}
                    </div>
                 </td>
               </ng-container>

               <!-- Status Column -->
               <ng-container matColumnDef="status">
                 <th mat-header-cell *matHeaderCellDef class="table-header">Statut</th>
                 <td mat-cell *matCellDef="let order" class="status-cell">
                    <span [class]="'status-badge status-' + order.orderStatus?.toLowerCase()">
                        {{ order.orderStatus}}
                    </span>
                 </td>
               </ng-container>

               <!-- Action Column -->
               <ng-container matColumnDef="action">
                <th mat-header-cell *matHeaderCellDef class="table-header">Actions</th>
                <td mat-cell *matCellDef="let order" class="action-cell">
                    <button mat-raised-button [matMenuTriggerFor]="menu" class="action-btn">
                        <mat-icon>settings</mat-icon>
                        Actions
                    </button>
                    <mat-menu #menu="matMenu" class="action-menu">
                        <button mat-menu-item (click)="changeOrderStatus(order.id, 'Shipped')" class="menu-item">
                            <mat-icon>local_shipping</mat-icon>
                            <span>Expédiée</span>
                        </button>
                        <button mat-menu-item (click)="changeOrderStatus(order.id, 'Delivered')" class="menu-item">
                            <mat-icon>check_circle</mat-icon>
                            <span>Livrée</span>
                        </button>
                        <mat-divider></mat-divider>
                        <button mat-menu-item (click)="viewOrderDetails(order)" class="menu-item">
                            <mat-icon>visibility</mat-icon>
                            <span>Détails</span>
                        </button>
                    </mat-menu> 
                </td>
               </ng-container>

               <!-- Header Row -->
               <tr mat-header-row *matHeaderRowDef="displayedColumns" class="table-header-row"></tr>
               
               <!-- Data Row -->
               <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="table-row"></tr>

            </table>

            <!-- Empty State -->
            <div *ngIf="orders.length === 0" class="empty-state">
                <mat-icon class="empty-icon">inventory_2</mat-icon>
                <h3>Aucune commande trouvée</h3>
                <p>Les commandes apparaîtront ici lorsqu'elles seront passées.</p>
            </div>

            <!-- Pagination -->
            <mat-paginator [pageSize]="10" [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons class="custom-paginator">
            </mat-paginator>
        </mat-card-content>
    </mat-card>
</div>
